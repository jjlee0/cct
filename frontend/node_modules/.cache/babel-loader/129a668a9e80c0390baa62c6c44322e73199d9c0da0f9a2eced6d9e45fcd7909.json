{"ast":null,"code":"import React from'react';import{useState,useEffect}from'react';import GenreCard from'./GenreCard';import axios from'axios';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function Genre(){const[genresData,setGenresData]=useState([// {\n//   \"genreId\": \"KnvZfZ7vAvv\",\n//   \"name\": \"GenreName\",\n//   \"popular_artists\": [\"73sIBHcqh3Z3NyqHKZ7FOL\", \"Artists 2 id\", \"Artists 3 id\"],\n//   \"upcoming_events\": [\"Event ID\"],\n//   \"top_songs\": [\"Song 1\", \"Song 2\", \"Song 3\"],\n//   \"events_price_range\": [0, 0]\n// }\n]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const fetchData=async currentPage=>{try{const response=await axios.get(\"https://www.cheapcheapticket.xyz/GetGenres\",{params:{page:currentPage,per_page:5}});const responseLength=await axios.get(\"https://www.cheapcheapticket.xyz/GetAllGenres\");const newGenres=response.data.map((newGenre,index)=>{const defaultGenre=genresData[index]||{};return{...defaultGenre,...newGenre};});setGenresData(newGenres);const totalGenres=responseLength.data.length;setTotalPages(Math.ceil(totalGenres/5));}catch(error){console.error(\"Error:\",error);}};useEffect(()=>{fetchData(currentPage);},[currentPage]);const handlePageChange=newPage=>{setCurrentPage(newPage);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{class:\"m-5 page-title\",children:\"Genres\"}),/*#__PURE__*/_jsx(\"div\",{class:\"row d-flex justify-content-center genre-card-container \",children:genresData.map((genre,index)=>/*#__PURE__*/_jsx(GenreCard,{genreId:genre.id,name:genre.name,popularArtists:genre.popular_artists,upcomingEvents:genre.upcoming_events,topSongs:genre.top_songs,eventsPriceRange:genre.events_price_range},index))}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pagination p-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"page-item\",disabled:currentPage===1,onClick:()=>handlePageChange(currentPage-1),children:\"Back\"}),Array.from({length:totalPages},(_,index)=>currentPage===index+1?/*#__PURE__*/_jsx(\"button\",{class:\" page-item text-bg-dark\",children:currentPage}):/*#__PURE__*/_jsx(_Fragment,{})),/*#__PURE__*/_jsx(\"button\",{className:\"page-item\",disabled:currentPage===totalPages,onClick:()=>handlePageChange(currentPage+1),children:\"Next\"})]})})})]});}export default Genre;","map":{"version":3,"names":["React","useState","useEffect","GenreCard","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Genre","genresData","setGenresData","currentPage","setCurrentPage","totalPages","setTotalPages","fetchData","response","get","params","page","per_page","responseLength","newGenres","data","map","newGenre","index","defaultGenre","totalGenres","length","Math","ceil","error","console","handlePageChange","newPage","children","class","genre","genreId","id","name","popularArtists","popular_artists","upcomingEvents","upcoming_events","topSongs","top_songs","eventsPriceRange","events_price_range","className","disabled","onClick","Array","from","_"],"sources":["/Users/josep/373/cs373-idb/cs373-idb/frontend/src/components/Genre.js"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport GenreCard from './GenreCard';\nimport axios from 'axios'\n\n\nfunction Genre() {\n\n  const [genresData, setGenresData] = useState(\n    [\n      // {\n      //   \"genreId\": \"KnvZfZ7vAvv\",\n      //   \"name\": \"GenreName\",\n      //   \"popular_artists\": [\"73sIBHcqh3Z3NyqHKZ7FOL\", \"Artists 2 id\", \"Artists 3 id\"],\n      //   \"upcoming_events\": [\"Event ID\"],\n      //   \"top_songs\": [\"Song 1\", \"Song 2\", \"Song 3\"],\n      //   \"events_price_range\": [0, 0]\n      // }\n    ]\n  );\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  const fetchData = async (currentPage) => {\n    try {\n      const response = await axios.get(`https://www.cheapcheapticket.xyz/GetGenres`, {\n        params: { page: currentPage, per_page: 5 }\n      });\n      \n      const responseLength = await axios.get(`https://www.cheapcheapticket.xyz/GetAllGenres`);\n\n      const newGenres = response.data.map((newGenre, index) => {\n        const defaultGenre = genresData[index] || {};\n        return {\n          ...defaultGenre,\n          ...newGenre\n        };\n      });\n\n      setGenresData( newGenres );\n      const totalGenres = responseLength.data.length;\n      setTotalPages(Math.ceil(totalGenres / 5));\n    } catch (error) {\n      console.error(\"Error:\", error)\n    }\n  };\n\n  useEffect(() => {\n    fetchData(currentPage);\n  }, [currentPage]); \n\n  const handlePageChange = (newPage) => {\n    setCurrentPage(newPage);\n  };\n\n\n  return (\n    <>\n\n      <h1 class=\"m-5 page-title\">Genres</h1>\n      <div class=\"row d-flex justify-content-center genre-card-container \">\n        {\n          genresData.map((genre, index) => (\n            <GenreCard key={index}\n              genreId={genre.id}\n              name={genre.name}\n              popularArtists={genre.popular_artists}\n              upcomingEvents={genre.upcoming_events}\n              topSongs={genre.top_songs}\n              eventsPriceRange={genre.events_price_range}\n            />\n          ))\n        }\n      </div>\n\n      <div class=\"d-flex justify-content-center align-items-center\">\n      <div className=\"d-flex justify-content-center align-items-center\">\n        <div className=\"pagination p-5\">\n          <button className=\"page-item\" disabled={currentPage === 1} onClick={() => handlePageChange(currentPage - 1)}>Back</button>\n          {Array.from({ length: totalPages }, (_, index) => (\n            currentPage === index + 1 ?\n              <button class=\" page-item text-bg-dark\" >{currentPage}</button>\n              :\n              <></>\n          ))}\n          <button className=\"page-item\" disabled={currentPage === totalPages} onClick={() => handlePageChange(currentPage + 1)}>Next</button>\n        </div>\n      </div>\n      </div>\n    </>\n\n  );\n}\n\nexport default Genre;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}