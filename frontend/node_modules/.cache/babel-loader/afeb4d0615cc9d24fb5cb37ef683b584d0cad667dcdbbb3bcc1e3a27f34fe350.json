{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{useState,useEffect}from'react';import{useParams}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function GenreInstance(){const{genreId}=useParams();const[genreData,setGenreData]=useState({\"name\":\"GenreName\",\"popular_artists\":[\"Artists 1 id\"],\"upcoming_events\":[\"Event 1 id\"],\"top_songs\":[\"Song 1\",\"Song 2\",\"Song 3\"],\"events_price_range\":[0,0]});const[eventIdPairs,setEventIdPairs]=useState({});const[artistsIdPairs,setArtistsIdPairs]=useState({});useEffect(()=>{const getGenreData=async()=>{try{const response=await axios.get(\"/GetGenre/\".concat(genreId));setGenreData(response.data);}catch(error){console.error('Error:',error);}};getGenreData();},[genreId]);useEffect(()=>{const getEventNames=async()=>{if(genreData.upcoming_events){try{const eventPromises=genreData.upcoming_events.map(async eventId=>{const response=await axios.get(\"/GetEvent/\".concat(eventId));return{eventId,eventName:response.data.event_name};});const eventNames=await Promise.all(eventPromises);const eventIdPairs=Object.fromEntries(eventNames.map(event=>[event.eventId,event.eventName]));setEventIdPairs(eventIdPairs);}catch(error){console.error('Error:',error);}}};const fetchArtistsNames=async()=>{if(genreData.popular_artists){try{const namePromises=genreData.popular_artists.map(async artistId=>{const response=await axios.get(\"/GetArtist/\".concat(artistId));return{artistId,name:response.data.name};});const artistsNames=await Promise.all(namePromises);const artistsIdPairs=Object.fromEntries(artistsNames.map(artist=>[artist.artistId,artist.name]));setArtistsIdPairs(artistsIdPairs);}catch(error){console.error('Error:',error);}}};getEventNames();fetchArtistsNames();},[genreData]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-title mb-5 \",children:genreData.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-start justify-content-center genre-page text-start mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"genre-page-con d-flex flex-column mb-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-subtitle\",children:\"Top songs \"}),genreData.top_songs.map((song,index)=>index<3?/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-text\",children:song},index):null)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"genre-page-con d-flex flex-column mb-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-subtitle\",children:\"Top Artists \"}),Object.entries(artistsIdPairs).map((_ref,index)=>{let[key,value]=_ref;return/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-text\",children:/*#__PURE__*/_jsx(Link,{className:\"genre-page-link\",to:\"/artists/artistspage/\".concat(key),children:value})},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"genre-page-con genre-page-venue d-flex flex-column mb-5 p-2 pb-3 rounded-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-subtitle mt-2\",children:\"Venues \"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"genre-page-price mb-4 \",children:[\"$\",genreData.events_price_range[0],\" - $\",genreData.events_price_range[1]]}),Object.entries(eventIdPairs).map((_ref2,index)=>{let[key,value]=_ref2;return/*#__PURE__*/_jsx(\"h1\",{className:\"genre-page-text mb-2\",children:/*#__PURE__*/_jsx(Link,{className:\"genre-page-link\",to:\"/venue/\".concat(key),children:value.length<17?value:\"\".concat(value.substring(0,14),\"...\")})},index);})]})]})]});}export default GenreInstance;","map":{"version":3,"names":["React","Link","useState","useEffect","useParams","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GenreInstance","genreId","genreData","setGenreData","eventIdPairs","setEventIdPairs","artistsIdPairs","setArtistsIdPairs","getGenreData","response","get","concat","data","error","console","getEventNames","upcoming_events","eventPromises","map","eventId","eventName","event_name","eventNames","Promise","all","Object","fromEntries","event","fetchArtistsNames","popular_artists","namePromises","artistId","name","artistsNames","artist","children","className","top_songs","song","index","entries","_ref","key","value","to","events_price_range","_ref2","length","substring"],"sources":["/Users/josep/373/cs373-idb/cs373-idb/frontend/src/components/GenreInstance.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport axios from 'axios';\n\nfunction GenreInstance() {\n    const { genreId } = useParams();\n\n    const [genreData, setGenreData] = useState({\n        \"name\": \"GenreName\",\n        \"popular_artists\": [\"Artists 1 id\"],\n        \"upcoming_events\": [\"Event 1 id\"],\n        \"top_songs\": [\"Song 1\", \"Song 2\", \"Song 3\"],\n        \"events_price_range\": [0, 0]\n    });\n\n    const [eventIdPairs, setEventIdPairs] = useState({});\n    const [artistsIdPairs, setArtistsIdPairs] = useState({});\n\n    useEffect(() => {\n        const getGenreData = async () => {\n            try {\n                const response = await axios.get(`/GetGenre/${genreId}`);\n                setGenreData(response.data);\n            } catch (error) {\n                console.error('Error:', error);\n            }\n        };\n        getGenreData();\n    }, [genreId]);\n\n    useEffect(() => {\n        const getEventNames = async () => {\n            if (genreData.upcoming_events) {\n                try {\n                    const eventPromises = genreData.upcoming_events.map(async (eventId) => {\n                        const response = await axios.get(`/GetEvent/${eventId}`);\n                        return { eventId, eventName: response.data.event_name };\n                    });\n                    const eventNames = await Promise.all(eventPromises);\n                    const eventIdPairs = Object.fromEntries(\n                        eventNames.map(event => [event.eventId, event.eventName])\n                    );\n                    setEventIdPairs(eventIdPairs);\n                } catch (error) {\n                    console.error('Error:', error);\n                }\n            }\n        };\n\n        const fetchArtistsNames = async () => {\n            if (genreData.popular_artists) {\n                try {\n                    const namePromises = genreData.popular_artists.map(async (artistId) => {\n                        const response = await axios.get(`/GetArtist/${artistId}`);\n                        return { artistId, name: response.data.name };\n                    });\n                    const artistsNames = await Promise.all(namePromises);\n                    const artistsIdPairs = Object.fromEntries(\n                        artistsNames.map(artist => [artist.artistId, artist.name])\n                    );\n                    setArtistsIdPairs(artistsIdPairs);\n                } catch (error) {\n                    console.error('Error:', error);\n                }\n            }\n        };\n\n        getEventNames();\n        fetchArtistsNames();\n    }, [genreData]);\n\n    return (\n        <>\n            <div>\n                <h1 className=\"genre-page-title mb-5 \">{genreData.name}</h1>\n            </div>\n            <div className=\"d-flex flex-row align-items-start justify-content-center genre-page text-start mt-5\">\n\n                <div className=\"genre-page-con d-flex flex-column mb-5\">\n                    <h1 className=\"genre-page-subtitle\">Top songs </h1>\n                    {genreData.top_songs.map((song, index) => (\n                        index < 3 ? <h1 key={index} className=\"genre-page-text\">{song}</h1> : null\n                    ))}\n                </div>\n\n                <div className=\"genre-page-con d-flex flex-column mb-5\">\n                    <h1 className=\"genre-page-subtitle\">Top Artists </h1>\n                    {Object.entries(artistsIdPairs).map(([key, value], index) => (\n                        <h1 key={index} className=\"genre-page-text\">\n                            <Link className=\"genre-page-link\" to={`/artists/artistspage/${key}`}>{value}</Link>\n                        </h1>\n                    ))}\n                </div>\n\n                <div className=\"genre-page-con genre-page-venue d-flex flex-column mb-5 p-2 pb-3 rounded-4\">\n                    <h1 className=\"genre-page-subtitle mt-2\">Venues </h1>\n                    <h1 className=\"genre-page-price mb-4 \">${genreData.events_price_range[0]} - ${genreData.events_price_range[1]}</h1>\n                    {Object.entries(eventIdPairs).map(([key, value], index) => (\n                        <h1 key={index} className=\"genre-page-text mb-2\">\n                            <Link className=\"genre-page-link\" to={`/venue/${key}`}>\n                                {value.length < 17 ? value : `${value.substring(0, 14)}...`}\n                            </Link>\n                        </h1>\n                    ))}\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default GenreInstance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}